<html>
    <head>
        <title>Price Calculator</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    </head>

    <body class="p-4">

        <!-- LKR PRICE -->
        <h4 class="alert alert-primary">
            Price in LKR : <span id="result"></span>
        </h4>

        <h6 class="h4">
            <span>Current JPY(LKR) <span id="rate"></span></span>
        </h6>

        <form class="form" style="width: 80vw;" onkeyup="calculate()">
            <input class="form-control my-2" type="number" name="price" id="price" placeholder="Price">
            <input class="form-control my-2" type="number" name="weight" id="weight" placeholder="Weight in grams">
            <input class="form-control my-2" type="number" name="add" id="add" value="0" placeholder="Additional Price">
            <input class="form-control my-2" type="number" name="minus" id="minus" value="0" placeholder="Discount Price">
        </form>

        <hr>

        <!-- NEW ROYJAPAN PRICE -->
        <h4 class="alert alert-success">
            RoyJapan Price (USD): <span id="roy"></span>
        </h4>

    </body>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <script>

        let exchangeRate = 0;

        const apiKey = '47eeb9bea1f2b868a74db39b';
        const url = `https://v6.exchangerate-api.com/v6/${apiKey}/latest/JPY`;

        fetch(url)
            .then(res => res.json())
            .then(data => {
                exchangeRate = data.conversion_rates.LKR;
                document.getElementById("rate").textContent = exchangeRate;
            });

        function calculate() {

            // --------------------
            // Original LKR Calculation
            // --------------------
            const usedRate = 2; // your manual override

            const price = parseFloat(document.getElementById("price").value) || 0;
            const weight = parseFloat(document.getElementById("weight").value) || 0;
            const add = parseFloat(document.getElementById("add").value) || 0;
            const minus = parseFloat(document.getElementById("minus").value) || 0;

            const shipping = 4;
            const product_shipping = ((shipping * weight) * usedRate) + 150;
            const profit = price * 0.40;

            const listedPrice = price + product_shipping + profit + add - minus;

            document.getElementById("result").textContent = listedPrice;


            // --------------------
            // NEW RoyJapan Price (USD)
            // --------------------
            const serviceFee = price * 0.14;
            const profit2 = price * 0.35;
            const usdRate = 143;

            const royJapanPrice = (price + serviceFee + profit2) / usdRate;

            document.getElementById("roy").textContent = royJapanPrice.toFixed(2);
        }

    </script>
</html>


